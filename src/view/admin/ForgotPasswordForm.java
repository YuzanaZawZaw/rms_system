package view.admin;

import java.awt.Color;

import javax.swing.JOptionPane;

import view.myapp.LoginMain;
import model.Employee;
import model.Recruiter;

/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author Yuzana Zaw Zaw
 */
public class ForgotPasswordForm extends javax.swing.JFrame {
	/**
     * Creates new form ForgotPasswordForm
     */
	String comb;
	String username;
	// Variables declaration - do not modify
	private javax.swing.JPanel LoginButton;
	private javax.swing.JComboBox RegisteredAsCombo;
	private javax.swing.JTextField SecurityText;
	private javax.swing.JPanel SignInButton;
	private javax.swing.JLabel confirmLabel;
	private javax.swing.JPasswordField confirmPasswordText;
	private javax.swing.JLabel gotitLbl;
	private javax.swing.JLabel jLabel10;
	private javax.swing.JLabel jLabel17;
	private javax.swing.JLabel jLabel18;
	private javax.swing.JLabel jLabel7;
	private javax.swing.JLabel jLabel8;
	private javax.swing.JSeparator jSeparator4;
	private javax.swing.JSeparator jSeparator5;
	private javax.swing.JSeparator jSeparator6;
	private javax.swing.JSeparator jSeparator7;
	private javax.swing.JSeparator jSeparator8;
	private javax.swing.JSeparator jSeparator9;
	private keeptoo.KGradientPanel mainPanel;
	private javax.swing.JLabel newPasswordLbl;
	private javax.swing.JPasswordField newPasswordText;
	private javax.swing.JLabel registerAsLbl;
	private javax.swing.JPanel saveButton;
	private javax.swing.JLabel secQCodeLbl;
	private javax.swing.JLabel userNameLbl;
	private javax.swing.JTextField usernameTxt;
	private javax.swing.JLabel verifyButton;
	private javax.swing.JPanel xpanel;
	private javax.swing.JPanel xyPanel;
	private javax.swing.JPanel ypanel;

	// End of variables declaration
	/**
	 * Creates new form ForgotPasswordForm
	 */
	public ForgotPasswordForm() {
		initComponents();
		newPasswordLbl.setVisible(false);
		confirmLabel.setVisible(false);
		newPasswordText.setVisible(false);
		confirmPasswordText.setVisible(false);
		saveButton.setVisible(false);

	}

	/**
	 * This method is called from within the constructor to initialize the form.
	 * WARNING: Do NOT modify this code. The content of this method is always
	 * regenerated by the Form Editor.
	 */
	@SuppressWarnings("unchecked")
	// <editor-fold defaultstate="collapsed" desc="Generated Code">
	private void initComponents() {

		mainPanel = new keeptoo.KGradientPanel();
		registerAsLbl = new javax.swing.JLabel();
		RegisteredAsCombo = new javax.swing.JComboBox();
		jSeparator4 = new javax.swing.JSeparator();
		confirmLabel = new javax.swing.JLabel();
		LoginButton = new javax.swing.JPanel();
		jLabel10 = new javax.swing.JLabel();
		verifyButton = new javax.swing.JLabel();
		gotitLbl = new javax.swing.JLabel();
		jSeparator7 = new javax.swing.JSeparator();
		SignInButton = new javax.swing.JPanel();
		jLabel17 = new javax.swing.JLabel();
		secQCodeLbl = new javax.swing.JLabel();
		jSeparator5 = new javax.swing.JSeparator();
		userNameLbl = new javax.swing.JLabel();
		jSeparator6 = new javax.swing.JSeparator();
		jSeparator8 = new javax.swing.JSeparator();
		newPasswordLbl = new javax.swing.JLabel();
		jSeparator9 = new javax.swing.JSeparator();
		saveButton = new javax.swing.JPanel();
		jLabel18 = new javax.swing.JLabel();
		usernameTxt = new javax.swing.JTextField();
		SecurityText = new javax.swing.JTextField();
		newPasswordText = new javax.swing.JPasswordField();
		confirmPasswordText = new javax.swing.JPasswordField();
		xyPanel = new javax.swing.JPanel();
		xpanel = new javax.swing.JPanel();
		jLabel7 = new javax.swing.JLabel();
		ypanel = new javax.swing.JPanel();
		jLabel8 = new javax.swing.JLabel();

		setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
		setUndecorated(true);

		mainPanel.setBackground(new java.awt.Color(102, 0, 153));
		mainPanel.setkEndColor(new java.awt.Color(153, 0, 204));
		mainPanel.setkStartColor(new java.awt.Color(102, 0, 153));
		mainPanel
				.setMaximumSize(new java.awt.Dimension(2147483647, 2147483647));
		mainPanel.setMinimumSize(new java.awt.Dimension(1060, 270));
		mainPanel.setPreferredSize(new java.awt.Dimension(1060, 646));
		mainPanel.setLayout(null);

		registerAsLbl.setFont(new java.awt.Font("Century Gothic", 1, 14)); // NOI18N
		registerAsLbl.setForeground(new java.awt.Color(204, 204, 204));
		registerAsLbl.setText("REGISTERED AS");
		mainPanel.add(registerAsLbl);
		registerAsLbl.setBounds(190, 100, 110, 19);

		RegisteredAsCombo.setModel(new javax.swing.DefaultComboBoxModel(
				new String[] { "Employee", "Recruiter"}));
		mainPanel.add(RegisteredAsCombo);
		RegisteredAsCombo.setBounds(190, 130, 110, 22);

		jSeparator4.setForeground(new java.awt.Color(255, 255, 255));
		mainPanel.add(jSeparator4);
		jSeparator4.setBounds(190, 310, 270, 10);

		confirmLabel.setFont(new java.awt.Font("Century Gothic", 1, 14)); // NOI18N
		confirmLabel.setForeground(new java.awt.Color(204, 204, 204));
		confirmLabel.setText("CONFIRM PASSWORD");
		mainPanel.add(confirmLabel);
		confirmLabel.setBounds(190, 500, 170, 19);

		LoginButton.setBackground(new java.awt.Color(0, 0, 51));
		LoginButton.addMouseListener(new java.awt.event.MouseAdapter() {
			public void mouseClicked(java.awt.event.MouseEvent evt) {
				LoginButtonMouseClicked(evt);
			}
		});
		LoginButton.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

		jLabel10.setFont(new java.awt.Font("Century Gothic", 1, 14)); // NOI18N
		jLabel10.setForeground(new java.awt.Color(204, 204, 204));
		jLabel10.setText("EMAIL");
		LoginButton.add(jLabel10,
				new org.netbeans.lib.awtextra.AbsoluteConstraints(500, 330, -1,
						-1));

		verifyButton.setFont(new java.awt.Font("Century Gothic", 1, 14)); // NOI18N
		verifyButton.setForeground(new java.awt.Color(204, 204, 204));
		verifyButton.setText("Verify");
		verifyButton.addMouseListener(new java.awt.event.MouseAdapter() {
			public void mouseClicked(java.awt.event.MouseEvent evt) {
				verifyButtonMouseClicked(evt);
			}
		});
		LoginButton.add(verifyButton,
				new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 10, -1,
						-1));

		mainPanel.add(LoginButton);
		LoginButton.setBounds(240, 340, 150, 40);

		gotitLbl.setFont(new java.awt.Font("Century Gothic", 0, 12)); // NOI18N
		gotitLbl.setForeground(new java.awt.Color(204, 204, 204));
		gotitLbl.setText("Got it?");
		mainPanel.add(gotitLbl);
		gotitLbl.setBounds(690, 540, 230, 16);

		jSeparator7.setForeground(new java.awt.Color(255, 255, 255));
		mainPanel.add(jSeparator7);
		jSeparator7.setBounds(690, 560, 150, 10);

		SignInButton.setBackground(new java.awt.Color(0, 0, 51));
		SignInButton.addMouseListener(new java.awt.event.MouseAdapter() {
			public void mouseClicked(java.awt.event.MouseEvent evt) {
				SignInButtonMouseClicked(evt);
			}
		});
		SignInButton.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

		jLabel17.setFont(new java.awt.Font("Century Gothic", 1, 14)); // NOI18N
		jLabel17.setForeground(new java.awt.Color(204, 204, 204));
		jLabel17.setText("SignIn");
	
		SignInButton.add(jLabel17,
				new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 10, -1,
						-1));

		mainPanel.add(SignInButton);
		SignInButton.setBounds(690, 590, 140, 40);

		secQCodeLbl.setFont(new java.awt.Font("Century Gothic", 1, 14)); // NOI18N
		secQCodeLbl.setForeground(new java.awt.Color(204, 204, 204));
		secQCodeLbl.setText("WHAT IS YOUR DREAM CITY?");
		mainPanel.add(secQCodeLbl);
		secQCodeLbl.setBounds(190, 250, 270, 19);

		jSeparator5.setForeground(new java.awt.Color(255, 255, 255));
		mainPanel.add(jSeparator5);
		jSeparator5.setBounds(190, 160, 270, 10);

		userNameLbl.setFont(new java.awt.Font("Century Gothic", 1, 14)); // NOI18N
		userNameLbl.setForeground(new java.awt.Color(204, 204, 204));
		userNameLbl.setText("USERNAME");
		mainPanel.add(userNameLbl);
		userNameLbl.setBounds(190, 180, 90, 19);

		jSeparator6.setForeground(new java.awt.Color(255, 255, 255));
		mainPanel.add(jSeparator6);
		jSeparator6.setBounds(190, 550, 270, 10);

		jSeparator8.setForeground(new java.awt.Color(255, 255, 255));
		mainPanel.add(jSeparator8);
		jSeparator8.setBounds(190, 230, 270, 10);

		newPasswordLbl.setFont(new java.awt.Font("Century Gothic", 1, 14)); // NOI18N
		newPasswordLbl.setForeground(new java.awt.Color(204, 204, 204));
		newPasswordLbl.setText("NEW PASSWORD");
		mainPanel.add(newPasswordLbl);
		newPasswordLbl.setBounds(190, 430, 130, 19);

		jSeparator9.setForeground(new java.awt.Color(255, 255, 255));
		mainPanel.add(jSeparator9);
		jSeparator9.setBounds(190, 480, 270, 10);

		saveButton.setBackground(new java.awt.Color(0, 0, 51));
		saveButton.addMouseListener(new java.awt.event.MouseAdapter() {
			public void mouseClicked(java.awt.event.MouseEvent evt) {
				saveButtonMouseClicked(evt);
			}
		});
		saveButton.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

		jLabel18.setFont(new java.awt.Font("Century Gothic", 1, 14)); // NOI18N
		jLabel18.setForeground(new java.awt.Color(204, 204, 204));
		jLabel18.setText("Save Changes");

		saveButton.add(jLabel18,
				new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 10, -1,
						-1));

		mainPanel.add(saveButton);
		saveButton.setBounds(220, 590, 200, 40);

		usernameTxt.setBackground(new java.awt.Color(51, 51, 51));
		usernameTxt.setFont(new java.awt.Font("Century Gothic", 0, 12)); // NOI18N
		usernameTxt.setForeground(new java.awt.Color(255, 255, 255));
		usernameTxt.setBorder(null);
		usernameTxt.setDisabledTextColor(new java.awt.Color(204, 204, 204));
	
	
		mainPanel.add(usernameTxt);
		usernameTxt.setBounds(190, 200, 270, 30);

		SecurityText.setBackground(new java.awt.Color(51, 51, 51));
		SecurityText.setFont(new java.awt.Font("Century Gothic", 0, 12)); // NOI18N
		SecurityText.setForeground(new java.awt.Color(255, 255, 255));
		SecurityText.setBorder(null);
		SecurityText.setDisabledTextColor(new java.awt.Color(204, 204, 204));
	
		mainPanel.add(SecurityText);
		SecurityText.setBounds(190, 280, 270, 30);

		newPasswordText.setBackground(new java.awt.Color(51, 51, 51));
		newPasswordText.setForeground(new java.awt.Color(255, 255, 255));
		newPasswordText.setBorder(null);
		mainPanel.add(newPasswordText);
		newPasswordText.setBounds(190, 450, 270, 30);

		confirmPasswordText.setBackground(new java.awt.Color(51, 51, 51));
		confirmPasswordText.setForeground(new java.awt.Color(255, 255, 255));
		confirmPasswordText.setBorder(null);
		mainPanel.add(confirmPasswordText);
		confirmPasswordText.setBounds(190, 520, 270, 30);

		xyPanel.setOpaque(false);

		xpanel.setBackground(new java.awt.Color(0, 0, 51));
		xpanel.addMouseListener(new java.awt.event.MouseAdapter() {
			public void mouseClicked(java.awt.event.MouseEvent evt) {
				xpanelMouseClicked(evt);
			}
		});

		jLabel7.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
		jLabel7.setForeground(new java.awt.Color(255, 255, 255));
		jLabel7.setText("X");

		javax.swing.GroupLayout xpanelLayout = new javax.swing.GroupLayout(
				xpanel);
		xpanel.setLayout(xpanelLayout);
		xpanelLayout.setHorizontalGroup(xpanelLayout.createParallelGroup(
				javax.swing.GroupLayout.Alignment.LEADING).addGroup(
				javax.swing.GroupLayout.Alignment.TRAILING,
				xpanelLayout
						.createSequentialGroup()
						.addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE,
								Short.MAX_VALUE).addComponent(jLabel7)
						.addContainerGap()));
		xpanelLayout.setVerticalGroup(xpanelLayout.createParallelGroup(
				javax.swing.GroupLayout.Alignment.LEADING).addComponent(
				jLabel7, javax.swing.GroupLayout.Alignment.TRAILING,
				javax.swing.GroupLayout.DEFAULT_SIZE,
				javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE));

		ypanel.setBackground(new java.awt.Color(0, 0, 51));
		ypanel.setForeground(new java.awt.Color(255, 255, 255));
		ypanel.addMouseListener(new java.awt.event.MouseAdapter() {
			public void mouseClicked(java.awt.event.MouseEvent evt) {
				ypanelMouseClicked(evt);
			}
		});

		jLabel8.setBackground(new java.awt.Color(0, 0, 51));
		jLabel8.setFont(new java.awt.Font("Tahoma", 1, 24)); // NOI18N
		jLabel8.setForeground(new java.awt.Color(255, 255, 255));
		jLabel8.setText("-");

		javax.swing.GroupLayout ypanelLayout = new javax.swing.GroupLayout(
				ypanel);
		ypanel.setLayout(ypanelLayout);
		ypanelLayout.setHorizontalGroup(ypanelLayout.createParallelGroup(
				javax.swing.GroupLayout.Alignment.LEADING).addGroup(
				javax.swing.GroupLayout.Alignment.TRAILING,
				ypanelLayout
						.createSequentialGroup()
						.addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE,
								Short.MAX_VALUE).addComponent(jLabel8)
						.addContainerGap()));
		ypanelLayout.setVerticalGroup(ypanelLayout.createParallelGroup(
				javax.swing.GroupLayout.Alignment.LEADING).addGroup(
				javax.swing.GroupLayout.Alignment.TRAILING,
				ypanelLayout.createSequentialGroup()
						.addGap(0, 1, Short.MAX_VALUE).addComponent(jLabel8)));

		javax.swing.GroupLayout xyPanelLayout = new javax.swing.GroupLayout(
				xyPanel);
		xyPanel.setLayout(xyPanelLayout);
		xyPanelLayout.setHorizontalGroup(xyPanelLayout.createParallelGroup(
				javax.swing.GroupLayout.Alignment.LEADING).addGroup(
				javax.swing.GroupLayout.Alignment.TRAILING,
				xyPanelLayout
						.createSequentialGroup()
						.addGap(0, 37, Short.MAX_VALUE)
						.addComponent(ypanel,
								javax.swing.GroupLayout.PREFERRED_SIZE,
								javax.swing.GroupLayout.DEFAULT_SIZE,
								javax.swing.GroupLayout.PREFERRED_SIZE)
						.addGap(26, 26, 26)
						.addComponent(xpanel,
								javax.swing.GroupLayout.PREFERRED_SIZE,
								javax.swing.GroupLayout.DEFAULT_SIZE,
								javax.swing.GroupLayout.PREFERRED_SIZE)));
		xyPanelLayout.setVerticalGroup(xyPanelLayout
				.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
				.addComponent(xpanel, javax.swing.GroupLayout.DEFAULT_SIZE,
						javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
				.addComponent(ypanel, javax.swing.GroupLayout.DEFAULT_SIZE,
						javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE));

		mainPanel.add(xyPanel);
		xyPanel.setBounds(890, 10, 104, 30);

		javax.swing.GroupLayout layout = new javax.swing.GroupLayout(
				getContentPane());
		getContentPane().setLayout(layout);
		layout.setHorizontalGroup(layout.createParallelGroup(
				javax.swing.GroupLayout.Alignment.LEADING).addGroup(
				layout.createSequentialGroup()
						.addContainerGap()
						.addComponent(mainPanel,
								javax.swing.GroupLayout.PREFERRED_SIZE, 1015,
								javax.swing.GroupLayout.PREFERRED_SIZE)
						.addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE,
								Short.MAX_VALUE)));
		layout.setVerticalGroup(layout.createParallelGroup(
				javax.swing.GroupLayout.Alignment.LEADING).addGroup(
				layout.createSequentialGroup()
						.addContainerGap()
						.addComponent(mainPanel,
								javax.swing.GroupLayout.DEFAULT_SIZE, 677,
								Short.MAX_VALUE)));

		setSize(new java.awt.Dimension(1027, 683));
		setLocationRelativeTo(null);
	}// </editor-fold>
	
	private void saveButtonMouseClicked(java.awt.event.MouseEvent evt) {
		// TODO add your handling code here:
		if (comb.equals("Employee")) {
			Employee employee = new Employee();
			String newPassword = newPasswordText.getText();
			String confirmPassword = confirmPasswordText.getText();
			if (newPassword.equals(confirmPassword)) {
				JOptionPane.showMessageDialog(null,
						"Your both passwords matched");
				employee.changePassword(username, newPassword);
				usernameTxt.setText("");
				SecurityText.setText("");
				newPasswordText.setText("");
				confirmPasswordText.setText("");

			} else {
				JOptionPane.showMessageDialog(null,
						"Your passwords didn't matched");
				newPasswordText.setText("");
				confirmPasswordText.setText("");

			}
		} else if (comb.equals("Recruiter")) {

			Recruiter dc = new Recruiter();
			String newPassword = newPasswordText.getText();
			String confirmPassword = confirmPasswordText.getText();
			if (newPassword.equals(confirmPassword)) {
				JOptionPane.showMessageDialog(null,
						"Your both passwords matched");
				dc.changePassword(username, newPassword);
				usernameTxt.setText("");
				SecurityText.setText("");
				newPasswordText.setText("");
				confirmPasswordText.setText("");

			} else {
				JOptionPane.showMessageDialog(null,
						"Your passwords didn't matched");
				newPasswordText.setText("");
				confirmPasswordText.setText("");

			}
		}
	}

	private void SignInButtonMouseClicked(java.awt.event.MouseEvent evt) {
		// TODO add your handling code here:
		this.setVisible(false);
		LoginMain reg = new LoginMain();
		reg.setVisible(true);
	}

	private void LoginButtonMouseClicked(java.awt.event.MouseEvent evt) {
		// TODO add your handling code here:

		comb = String.valueOf(RegisteredAsCombo.getSelectedItem());
		username = usernameTxt.getText();
		String sec = SecurityText.getText();
		
		System.out.println("username:"+username+"\n"+sec);

		if (comb == "Employee") {
			Employee d = new Employee();
			if (d.verifySecurityQ(username, sec)) {
				JOptionPane.showMessageDialog(null,
						"Your Security Answer Was Correct ");
				newPasswordLbl.setVisible(true);
				confirmLabel.setVisible(true);
				newPasswordText.setVisible(true);
				confirmPasswordText.setVisible(true);
				saveButton.setVisible(true);
				gotitLbl.setVisible(true);
				SignInButton.setVisible(true);
			} else {
				JOptionPane.showMessageDialog(null,
						"Your Security Answer Was Wrong ");
				usernameTxt.setText("");
				SecurityText.setText("");

			}
		} else if (comb == "Recruiter") {
			Recruiter d = new Recruiter();
			if (d.verifySecurityQ(username, sec)) {
				JOptionPane.showMessageDialog(null,
						"Your Security Answer Was Correct ");
				newPasswordLbl.setVisible(true);
				confirmLabel.setVisible(true);
				newPasswordText.setVisible(true);
				confirmPasswordText.setVisible(true);
				saveButton.setVisible(true);
				gotitLbl.setVisible(true);
				SignInButton.setVisible(true);
			} else {
				JOptionPane.showMessageDialog(null,
						"Your Security Answer Was Wrong ");
				usernameTxt.setText("");
				SecurityText.setText("");

			}

		}

	}

	private void verifyButtonMouseClicked(java.awt.event.MouseEvent evt) {
		// TODO add your handling code here:
		LoginButton.action(null, null);
	}


	private void xpanelMouseClicked(java.awt.event.MouseEvent evt) {
		// TODO add your handling code here:
		System.exit(0);
	}


	private void ypanelMouseClicked(java.awt.event.MouseEvent evt) {
		// TODO add your handling code here:
		setState(ForgotPasswordForm.ICONIFIED);
	}

	/**
	 * @param args
	 *            the command line arguments
	 */
	public static void main(String args[]) {
		/* Set the Nimbus look and feel */
		// <editor-fold defaultstate="collapsed"
		// desc=" Look and feel setting code (optional) ">
		/*
		 * If Nimbus (introduced in Java SE 6) is not available, stay with the
		 * default look and feel. For details see
		 * http://download.oracle.com/javase
		 * /tutorial/uiswing/lookandfeel/plaf.html
		 */
		try {
			for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager
					.getInstalledLookAndFeels()) {
				if ("Nimbus".equals(info.getName())) {
					javax.swing.UIManager.setLookAndFeel(info.getClassName());
					break;
				}
			}
		} catch (ClassNotFoundException ex) {
			java.util.logging.Logger.getLogger(
					ForgotPasswordForm.class.getName()).log(
					java.util.logging.Level.SEVERE, null, ex);
		} catch (InstantiationException ex) {
			java.util.logging.Logger.getLogger(
					ForgotPasswordForm.class.getName()).log(
					java.util.logging.Level.SEVERE, null, ex);
		} catch (IllegalAccessException ex) {
			java.util.logging.Logger.getLogger(
					ForgotPasswordForm.class.getName()).log(
					java.util.logging.Level.SEVERE, null, ex);
		} catch (javax.swing.UnsupportedLookAndFeelException ex) {
			java.util.logging.Logger.getLogger(
					ForgotPasswordForm.class.getName()).log(
					java.util.logging.Level.SEVERE, null, ex);
		}

		/* Create and display the form */
		java.awt.EventQueue.invokeLater(new Runnable() {
			public void run() {
				new ForgotPasswordForm().setVisible(true);
			}
		});
	}
}
